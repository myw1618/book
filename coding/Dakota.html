

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Dakota &#8212; ESE Jupyter Material</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="NumPy Arrays" href="NumPy_Arrays.html" />
    <link rel="prev" title="The Python Programming Language" href="intro.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">ESE Jupyter Material</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="../intro.html">Landing page</a>
  </li>
  <li class="">
    <a href="../mathematics/intro.html">Mathematics</a>
  </li>
  <li class="active">
    <a href="intro.html">Coding</a>
  <ul class="nav sidenav_l2">
    <li class="active">
      <a href="">Dakota</a>
    </li>
    <li class="">
      <a href="NumPy_Arrays.html">Numpy Arrays</a>
    </li>
    <li class="">
      <a href="Intro to Python/intro.html">Intro To Python</a>
    </li>
    <li class="">
      <a href="Pandas/intro.html">Pandas</a>
    </li>
  </ul>
  </li>
  <li class="">
    <a href="../geosciences/intro.html">Geosciences</a>
  </li>
  <li class="">
    <a href="../genindex.html">Index</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/coding/Dakota.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/coding/Dakota.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#installation" class="nav-link">Installation</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#python-template-for-dakota" class="nav-link">Python template for Dakota</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#dakota-bash-file" class="nav-link">Dakota bash file</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#dakota-input-file" class="nav-link">Dakota input file</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#references" class="nav-link">References</a>
        </li>
    
    </ul>
</nav>


    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="dakota">
<h1>Dakota<a class="headerlink" href="#dakota" title="Permalink to this headline">¶</a></h1>
<p>The dakota project provides software for optimisation and uncertainty quantification.</p>
<p>Dakota can be used for a broad range of computational tasks as it enables design exploration, risk analysis, model calibration, and quantification of margins and uncertainty with computational models.</p>
<p>The intended use of Dakota is to aid computational methods developed to better understand the complex physical systems they simulate. In many cases these simulations are used to find the optimal design of a system, or to make prediction for systems that can not be directly tested.</p>
<p>The use of these computational simulations can lead to better system designs and improved overall performance. Furthermore, a reduced dependence on physical testing can reduce development costs and quicken the design process.</p>
<p>In this notebook I will summarise how the Dakota library is used to automatize the parameter space investigated in a given computational model using python.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Dakota can be downloaded from https://dakota.sandia.gov/download.html. For the latest release savethe tar.gv file to downloads and extract it. Make sure the file is the source code. This will be yourDakota installation directory.</p>
<p>Before attempting to install dakota you must ensure you have the packages cmake and libboost in-stalled. If you dont you will have to find someone with the necessary admin rights to install these.</p>
<p>To extract the tar.gv file navigate to the file and type the following:</p>
<p style="background:black">
<code style="background:black;color:white">tar xvzf file.tar.gz
</code>
</p><p>Once the file has been extracted, navigate to the unzipped Dakota source code and find the first foldercontaining a CMakeList.txt file. Once there type the following to access cmake:</p>
<p style="background:black">
<code style="background:black;color:white">mkdir build <br>cd build<br>ccmake ..</code>
</p><p>On the window which appears,press the c key to run configure once. Once configured scroll to CMAKE-INSTALL-PREFIX and edit the variable to something memorable. (e.g /home/name/dakota) Pressthe c key again to configure and then the g key to exit back to the terminal.</p>
<p>Once back in the terminal type the following to run dakota:</p>
<p style="background:black">
<code style="background:black;color:white">make -j4 <br>make install</code>
</p></div>
<div class="section" id="python-template-for-dakota">
<h2>Python template for Dakota<a class="headerlink" href="#python-template-for-dakota" title="Permalink to this headline">¶</a></h2>
<p>To automatize the parameter space in your model using Dakota you first need to have a python script in which Dakota can adjust the parameters in the model simulations. To do this create a .py file by typing the following in the terminal.</p>
<p style="background:black">
<code style="background:black;color:white">gedit file.py
</code>
</p><p>Any parameter that is meant to be changed by Dakota, needs to be put in ‘{ }’ brackets. Dakota will evaluate changes in the response functions - print statements. In this case the print statement will be Parameter 1 and Parameter 2. This is implemented by the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Parameter1</span> <span class="o">=</span> <span class="p">{</span><span class="n">par1</span><span class="p">}</span>
<span class="n">Parameter2</span> <span class="o">=</span> <span class="p">{</span><span class="n">par2</span><span class="p">}</span>
</pre></div>
</div>
<p>Dakota can automatize more parameters for more complex studies.</p>
</div>
<div class="section" id="dakota-bash-file">
<h2>Dakota bash file<a class="headerlink" href="#dakota-bash-file" title="Permalink to this headline">¶</a></h2>
<p>The purpose of the bash file is to allow Dakota to investigate the selected parameters in the python file. In this case the bash file, e.g file.sh, creates a copy of the python file (the template file) and using the built in function ’dprepro’ changes the values of these parameters. It then runs the python script and returns the results.</p>
<p>In the following bash file ’file.py’ is the previously created python file and ’file_temp.in’ is the template file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/sh
# $1 is params.in FROM Dakota
# $2 is results.out returned to Dakota
#--------------
#PRE-PROCESSING
#--------------
echo entered shell script
dprepro $1 file.py file_temp.in
echo dprepro finished
# --------
# ANALYSIS
# --------
python file_temp.in &gt; results.tmp
# ---------------
# POST-PROCESSING
# ---------------
mv results.tmp $2
</pre></div>
</div>
</div>
<div class="section" id="dakota-input-file">
<h2>Dakota input file<a class="headerlink" href="#dakota-input-file" title="Permalink to this headline">¶</a></h2>
<p>The Dakota input file must consist of the following blocks: environment, method, model, variables, interface and responses. Details on these blocks can be found on the Reference Manual and User’s Manual. These can be downloaded from https://dakota.sandia.gov/documentation.html.</p>
<p>As an exampple in this simple case Dakota puts values ranging between 1 and 2 instead of Parameter1 ’par1’, and values ranging between 3 and 4 instead of Parameter2 ’par2’ in the template. Then, Dakota prints out the response function according to the input parameter into the tabular file ’file.dat’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>environment
    tabular_data
        tabular_data_file = ’file.dat’
        
method
    efficient_global
        max_iterations 50
        convergence_tolerance 1e-3
        x_conv_tol 1e-3
        gaussian_process
            surfpack
        export_approx_points_file ’file_surrogate.dat’ #interpolates results for points within the
                                                       #parameter space that have not been calculated
                                                       
variables
    continuous_design = 2 #number of parameters
        initial_point   1.5 3.5
        lower_bounds   1 3
        upper_bounds   2 4
        descriptors   ’par1’ ’par2’
        
model
    single
    
interface
    fork
        analysis_driver = ’file.sh’ # bash file that connects Dakota and Python files
    deactivate evaluation_cache restart_file
    failure_capture continuation

responses
    objective_functions = 1
        sense ’maximize’
        descriptors ’max_power’ #prints the average power with the aim of finding the max average power
    no_gradients
    no_hessians
    
</pre></div>
</div>
<p>Once the python, bash and input files have been created you can run the simulation with dakota usingthe following command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dakota</span> <span class="o">-</span><span class="n">i</span> <span class="n">file</span><span class="o">.</span><span class="ow">in</span> <span class="o">-</span><span class="n">o</span> <span class="n">file</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>https://dakota.sandia.gov</p></li>
</ul>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="intro.html" title="previous page">The Python Programming Language</a>
    <a class='right-next' id="next-link" href="NumPy_Arrays.html" title="next page">NumPy Arrays</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Imperial College London<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>